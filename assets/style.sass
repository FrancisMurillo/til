---
# vim: set foldmethod=marker foldmarker=[[[,]]] :
---
/*
 * imports and variables [[[
 */

@import url('//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css')
@import url('//cdn.jsdelivr.net/hint.css/1.3.2/hint.min.css')

@import 'normalize'
@import 'utils'
@import 'typography'

$text: #555
$black: #020202
$bg: #fff
$wash: #f4f5f7

$gray: #808890
$lightgray: #c0d3da
$hairline: #eef3fa

$accent: dodgerblue
$accent2: #f53

$page-width: 620px

/* ]]]
 * utilities [[[
 */

= clearfix
  &:after
    display: table
    content: ''
    clear: both
    height: 0
    zoom: 1

/* ]]]
 * html base (html, body) [[[
 */

*
  +antialias

html
  font-size: $body-font-size
  line-height: $body-line-height
  background: $bg
  color: $text

  @media (max-width: 768px)
    font-size: floor($body-font-size * 14/17)

html, input, textarea, td, th
  +body-font

html, body
  overflow-x: hidden

/* ]]]
 * basic styles (a, p, img...) [[[
 */

a, a:visited
  color: $text
  text-decoration: none
  box-shadow: inset 0 -1px rgba(#888, 0.3)
  transition: all 100ms linear

a:focus, a:hover
  box-shadow: inset 0 -2px $accent
  color: $black

strong, b
  &, a, a:visited
    color: $black

h3, p, ul, ol
  margin: 1.5em 0

ul, ol
  padding-left: 1.5em

ul
  list-style: none

ul > li
  position: relative

ul > li:before
  content: ''
  display: block
  position: absolute
  left: -1.4em
  top: 0
  margin-top: 0.7em
  width: 4px
  height: 4px
  border-radius: 50%
  border: solid 2px $lightgray

  @media (max-width: 768px)
    width: 3px
    height: 3px

h2
  &, a, a:visited
    color: $black

h2
  text-align: center
  +headline-font
  +headline-font-size(2em, 1.4)
  margin: 2em auto 0 auto
  @media (max-width: 768px)
    +headline-font-size(1.6em)

@media (min-width: 769px)
  h2:before,
  h2:after
    content: ''
    display: inline-block
    vertical-align: middle
    width: 46px
    height: 1px
    background: $lightgray
    margin: 0 30px

h3
  +bold-font
  +bold-font-size(1.1em)
  margin-top: 2em

  &, a, a:visited
    color: $black

  @media (max-width: 768px)
    margin-top: 1.5em

h3 + p
  margin-top: -1.7em

p > img:first-child:last-child
  display: block
  margin: 0 auto
  max-width: 100%

code
  +mono-font
  +mono-font-size(0.9em)

hr
  width: 200px
  height: 1px
  border: 0
  background: $lightgray
  margin: 3em auto
  display: block

table
  min-width: 100%
  margin-top: 2em
  margin-bottom: 2em
  font-size: 0.9em
  border-bottom: solid 1px $gray

thead > tr:first-child > th,
thead > tr:first-child > td,
tbody > tr:first-child > th,
tbody > tr:first-child > td
  border-top: solid 1px $gray

td, th
  text-align: left
  border-top: solid 1px $hairline
  padding: 8px 10px

th
  +bold-font
  color: $black

td:first-child,
th:first-child
  text-align: left
  padding-left: 0

td:last-child,
th:last-child
  padding-right: 0

table.no-head
  thead
    display: none

table.shortcuts
  &
    table-layout: fixed

  thead
    display: none

  th:nth-child(1), td:nth-child(1)
    width: 25%

  th:nth-child(2), td:nth-child(2)
    width: 75%

  td:first-child > code
    background: #fcfcfc
    padding: 5px 10px
    border-radius: 2px

// table.usli
//   @media (min-width: 768px)
//     width: calc(#{$page-width} + 50px)
//     margin-left: -25px

//   td:first-child,
//   th:first-child
//     padding-left: 25px

//   td:last-child,
//   th:last-child
//     padding-right: 25px

table.lite-headings
  &
    border-bottom: solid 1px mix($gray, $lightgray, 50%)
    
  th
    color: mix($gray, $lightgray, 50%)
    font-size: 0.9em

  thead > tr:first-child > td,
  thead > tr:first-child > th
    border-top: solid 1px mix($gray, $lightgray, 50%)

  tbody > tr:first-child > td,
  tbody > tr:first-child > th
    border-top: solid 1px $hairline

/* ]]]
 * pre > code -- code blocks [[[
 */

pre > code
  +mono-font
  +mono-font-size(0.87em)
  color: $text
  padding-right: 20px
  // box-shadow: inset 1px 1px rgba(black, 0.06)

pre
  padding: 20px 50px
  border-radius: 4px
  background: $wash
  margin: 2.2em -50px
  line-height: 1.25em

  @media (max-width: 768px)
    padding: 20px
    margin: 2em -20px
    background: darken($wash, 3%)

  @media (max-width: 660px)
    border-radius: 0

pre + pre
  margin-top: -1.5em

pre.medium
  > code
    font-size: 1em
  @media (min-width: 768px)
    padding-top: 30px
    padding-bottom: 30px

pre.large
  > code
    font-size: 1.1em
    line-height: 1.4em
  @media (min-width: 768px)
    padding-top: 30px
    padding-bottom: 30px

pre.terminal
  $term-border: mix($accent, white, 50%)

  &
    background: white
    border: solid 1px $term-border
    position: relative
    padding-top: 56px

    &.large
      padding-top: 65px

  &:before
    content: ''
    display: block
    height: 34px
    line-height: 34px
    background: white
    border-bottom: solid 1px $term-border
    border-top-left-radius: 3px
    border-top-right-radius: 3px
    position: absolute
    top: 0
    left: 0
    right: 0
    +bold-font

  &:after
    content: ''
    position: absolute
    display: block
    width: 4px
    height: 4px
    border-radius: 50%
    left: 15px
    top: 15px
    font-size: 20px
    background-color: $term-border
    box-shadow: 20px 0 $term-border, 40px 0 $term-border

  @media (max-width: 768px)
    margin-left: 0
    margin-right: 0

@media (min-width: 769px)
  pre.cursor > code > :last-child:after
    content: ''
    display: inline-block
    width: 3px
    height: 1em
    transform: scaleY(1.5) translateY(0.1em)
    margin-left: 0.4em
    background-color: $accent
    -webkit-animation: blink 700ms steps(2,end) infinite
    -moz-animation: blink 700ms steps(2,end) infinite
    animation: blink 700ms steps(2,end) infinite

/* ]]]
 * iframes [[[
 */

p > iframe
  margin: 0 auto
  display: block

// ]]]
// [Post things] [[[

/* ]]]
 * .post-item -- each post [[[
 */

.post-item
  max-width: $page-width
  margin: 0 auto

.post-list
  margin: 40px auto
  padding: 20px

  @media (max-width: 768px)
    margin: 0 auto

.post-list > .post-item:not(:first-child)
  &:before
    content: ''
    display: block
    width: 150px
    height: 1px
    background: $hairline
    margin: 7em auto

    @media (max-width: 768px)
      margin: 4em auto

/* ]]]
 * .post-headline -- H1's of posts [[[
 */

.post-headline
  &
    margin: 1.5em auto 3em auto
    text-align: center

  .post-icon
    margin-bottom: 2px

  h1
    text-align: center
    margin-bottom: 0
    +headline-font
    +headline-font-size(2.8em, 1.2)
    width: 80%
    margin-left: auto
    margin-right: auto

    @media (max-width: 768px)
      +headline-font-size(2em)

  .meta
    display: block
    text-align: center
    margin: 0
    margin-top: 1em
    font-weight: normal
    +caps-font
    font-size: 0.8em

  .meta .author,
  .meta .date
    margin: 0 5px
    padding-bottom: 2px

  .meta a,
  .meta a:visited
    color: $gray

  .meta a:hover,
  .meta a:focus
    &, span
      color: $gray

    time
      color: $black
      box-shadow: inset 0 -2px $accent

  a, a:visited, a:focus, a:hover
    color: $black
    text-decoration: none
    box-shadow: none

/* ]]]
 * .hljs -- syntax highlighting [[[
 */

.hljs-literal,
.hljs-number,
.hljs-string,
.hljs-symbol,
.hljs-value
  color: $accent

.hljs-key,
.hljs-attribute
  color: darken($accent, 20%)

.hljs-keyword,
.hljs-constant
  color: $black

.hljs-comment
  color: $gray
  font-style: italic

/* ]]]
 * .site-header -- main header [[[
 */

.site-header
  text-align: center
  padding: 0 20px

  .container
    padding: 15px 20px
    font-size: 0.9em
    color: rgba($gray, 0.6)
    border-bottom: solid 1px $hairline

  em
    +italic-font
    +italic-font-size(1.1em)
    font-size: 1.1em
    color: $text

/* ]]]
 * .post-icon -- category icons [[[
 */

$icon-size: 56px

= iconify($color, $text)
  &
    background: $color
    color: lighten($color, 50%)
    box-shadow: -2px 2px #e67e22, 2px -2px #f1c40f, 1px -2px rgba($color, 0.2), 1px 3px rgba($color, 0.3)

  span:after
    content: $text

.post-icon,
abbr.post-icon
  border: 0
  margin: 0
  display: inline-block
  width: $icon-size
  height: $icon-size
  line-height: $icon-size + 2px
  text-align: center
  border-radius: 50%
  color: white
  background: #eee

  +body-font
  font-size: 16px
  letter-spacing: 1px

  @media (max-width: 480px)
    transform: scale(0.75)

  &.-icon-css
    +iconify(#3498db, 'CSS')
    font-size: 14px
    line-height: $icon-size + 2px
  &.-icon-development
    +iconify(#34495e, 'DEV')
    font-size: 14px
    line-height: $icon-size + 2px
  &.-icon-ruby
    +iconify(#e74c3c, 'RB')
    text-indent: 2px
  &.-icon-javascript
    +iconify(#2ecc71, 'JS')
    text-indent: 1px

/* ]]]
 * .social-list -- social share icons [[[
 */

.social-list
  &, li
    margin: 0
    padding: 0

  &
    display: block
    text-align: center
    width: 100%
    margin-top: 2em

    @media (min-width: 768px)
      margin-top: 4em

  li
    display: inline-block

  a
    display: inline-block
    padding: 6px
    text-align: center
    box-shadow: none

  a:before, a:after
    transition: all 100ms linear

  .text
    display: none

  a:before
    font-family: 'Ionicons'
    font-weight: normal
    font-style: normal
    font-size: 18px
    width: 40px
    height: 40px
    line-height: 40px
    display: inline-block
    text-align: center
    border: solid 2px transparent
    border-radius: 50%

  = socialiconify($color, $content, $filled)
    &
      color: $lightgray

    &:hover,
    &:focus
      color: $color
    &:before
      content: $filled
    &:hover:before,
    &:focus:before
      border-color: $color
      content: $filled

  .facebook a
    +socialiconify(#4c66a4, '\f230', '\f231')
  .twitter a
    +socialiconify(dodgerblue, '\f242', '\f243')
  .googleplus a
    +socialiconify(#f53, '\f234', '\f235')

.hint--top, .hint--bottom
  &:before
    margin-top: -14px
    margin-left: -8px
    border-radius: 2px

  &:before, &:after
    transition-duration: 10ms

  &:after
    box-shadow: none
    border-radius: 2px
    text-shadow: none
    margin-left: -55px

/* ]]]
 * .about-the-site -- colophon [[[
 */

.about-the-site
  &
    position: relative

  .container
    text-align: center
    padding: 3em 80px
    margin: 0 auto
    +clearfix

    @media (max-width: 768px)
      padding-left: 40px
      padding-right: 40px

  &:before
    content: ''
    position: absolute
    display: block
    left: 20px
    right: 20px
    top: 0
    border-top: solid 1px $hairline

  &
    +body-font
    font-size: 0.85em
    color: lighten($gray, 20%)

  a, a:visited
    color: lighten($gray, 10%)
    box-shadow: inset 0 -1px rgba(black, 0.05)
    padding-bottom: 2px

  a:hover, a:focus
    color: $black
    box-shadow: inset 0 -2px $accent

  strong
    +bold-font

  strong a, strong a:visited
    color: $black
    box-shadow: none

  strong a:hover, strong a:focus
    color: $black
    box-shadow: inset 0 -2px $accent

  .identity
    margin: 0
    margin-top: 0.2em
    float: right
    +italic-font
    +italic-font-size(2.5em)

  .identity a,
  .identity a:visited
    color: $black
    box-shadow: none

  .identity a:hover,
  .identity a:focus
    color: $accent

  .blurb
    margin: 0
    max-width: 500px
    text-align: left
    float: left
    line-height: 1.55

  .back
    float: right
    margin-top: 0.4em
    margin-right: 2em

  .fleuron:before
    content: '\f492'
    font-family: Ionicons
    font-size: 16px
    font-weight: normal
    font-style: normal
    display: inline-block
    vertical-align: middle
    color: $black
    margin: 0 7px

    @media (max-width: 768px)
      display: none

  @media (max-width: 768px)
    .identity
      float: left
      clear: both
    .blurb
      float: none
      margin-bottom: 1em
      width: auto
    .back
      float: right
      margin-right: 0

.big-button,
a.big-button
  display: inline-block

  width: 180px
  height: 50px
  line-height: 50px - 2px
  padding: 0
  border-radius: 30px
  font-size: 0.85em
  box-shadow: none
  background: white

  @media (max-width: 768px)
    width: 140px
    height: 40px
    line-height: 40px - 2px

  &, &:visited
    border: solid 2px $accent
    color: $accent

  &.-back,
  &.-back:visited
    border: solid 1px rgba($gray, 0.2)
    color: $gray

  &.-back:before,
  &.-next:after
    font-family: Ionicons
    font-size: 20px
    display: inline-block
    vertical-align: middle
    position: relative
    top: -1px

  &.-back:before
    content: '\f38f'

  &.-next:after
    content: '\f3d1'
    margin-left: 16px
    top: 0

  &.-slim
    width: 60px
    border-width: 2px
    height: 60px
    line-height: 60px
    border-radius: 50%

    @media (max-width: 768px)
      width: 40px
      height: 40px
      line-height: 40px

  &:hover, &:focus
    background: $accent
    border-color: transparent
    color: white
    box-shadow: none

  &.-back:hover,
  &.-back:focus
    background: $accent
    color: white


/* ]]]
 * .next-article -- lead into the next article [[[
 */

.next-article
  $notch: "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1500' height='20' version='1.1'><polyline fill='white' points='1500,0 0,0 0,20'/></svg>"

  &
    display: block
    padding: 0
    background: url($notch) -50px top / 110% auto no-repeat, $wash
    margin-left: 40px
    margin-right: 40px
    position: relative

  @media (max-width: 480px)
    background: url($notch) -50px top / 110% auto no-repeat, darken($wash, 3%)

  &, &:hover, &:focus
    box-shadow: none

  &:after
    content: ''
    display: block
    position: absolute
    left: -20px
    right: -20px
    bottom: 0
    border-bottom: solid 1px $hairline

  // suppress its hairline
  & + .about-the-site:before
    display: none

  @media (max-width: 768px)
    margin-left: 0
    margin-right: 0

    // remove horizontal line
    & + .about-the-site:before
      display: none

  .container
    display: block
    text-align: center
    padding: 10em 20px

    @media (min-width: 769px)
      margin-top: 8em
      padding: 8em 20px

  .h3
    display: block
    margin: 0 auto auto
    padding: 0
    font-size: 2.2em
    line-height: 1.3em
    +bold-font
    color: $black
    transition: all 250ms linear

    &:hover > span
      box-shadow: inset 0 -2px $accent
      text-shadow: 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash, 0 0 4px $wash

    @media (max-width: 768px)
      font-size: 1.5em

  .h3, .excerpt
    max-width: $page-width * 0.9

  .h3 + .excerpt
    margin-top: 0.5em

  .excerpt
    display: block
    margin-left: auto
    margin-right: auto
    color: $gray
    font-size: 1em
    line-height: 1.6em

  .big-button
    margin-top: 2em

  h3 a:hover,
  h3 a:focus
    color: $accent

  .heading
    display: block
    color: $gray
    +caps-font
    font-size: 0.7em
    margin-bottom: 1em

  .heading:before
    font-family: Ionicons
    content: '\f4a8'
    margin-right: 15px
    font-size: 16px
    display: inline-block
    vertical-align: middle
    color: $accent

/* ]]]
 * .post-index (et al) -- utility classes [[[
 */

.post-index
  &
    margin: 0 auto 4em auto
    position: relative
    padding-top: 4em
    font-size: 0.9em

  .container
    overflow: hidden
    max-width: $page-width
    margin: 0 auto

  h3
    +caps-font
    color: $gray
    font-size: 1em

.post-index-item
  display: block
  overflow: hidden
  padding: 6px 20px
  border-top: solid 1px $hairline

  &, &:hover, &:focus
    box-shadow: none

  &:hover, &:focus
    .article
      transition: none

  .date
    display: block

  .date
    width: 100px
    font-size: 0.8em
    color: $gray

  @media (min-width: 768px)
    padding-left: 0
    padding-right: 0

    .date, .tag
      margin-top: 0.2em

    .date, article
      float: left

    .tag
      float: right

  .article
    color: $black
    margin-right: 3px
    transition: all 100ms linear

  &:hover .article
    color: $accent

  &:nth-of-type(1) .article,
  &:nth-of-type(2) .article,
  &:nth-of-type(3) .article,
  &:nth-of-type(4) .article
    +bold-font

  .tag
    color: $gray
    font-weight: normal
    font-size: 0.8em

// ]]]
// [Custom blocks] [[[

/* ]]]
 * .center (et al) -- utility classes [[[
 */

.center
  text-align: center

.spaced
  @media (min-width: 769px)
    margin-top: 4em
    margin-bottom: 4em

.spaced-more
  @media (min-width: 769px)
    margin-top: 6em
    margin-bottom: 6em

.spaced-less
  @media (min-width: 769px)
    margin-top: 2em
    margin-bottom: 2em

.wide
  @media (min-width: 920px)
    width: 140%
    margin-left: -20%

/* ]]]
 * .top/.bottom -- margin helpers [[[
 */

.top-collapse-0
  margin-top: 0
.top-collapse-1
  margin-top: -1em
.top-collapse-2
  margin-top: -2em
.top-collapse-4
  margin-top: -4em

.top-space-0
  margin-top: 0
.top-space-1
  margin-top: 1em
.top-space-2
  margin-top: 2em
.top-space-4
  margin-top: 2em
  @media (min-width: 769px)
    margin-top: 4em

.bottom-collapse-0
  margin-bottom: 0
.bottom-collapse-1
  margin-bottom: -1em
.bottom-collapse-2
  margin-bottom: -2em
.bottom-collapse-4
  margin-bottom: -4em

.bottom-space-0
  margin-bottom: 0
.bottom-space-1
  margin-bottom: 1em
.bottom-space-2
  margin-bottom: 2em
.bottom-space-4
  margin-bottom: 2em
  @media (min-width: 769px)
    margin-bottom: 4em

/* ]]]
 * .brief-intro -- Brief introduction [[[
 */

.brief-intro
  font-size: 1.1em
  color: $gray

/* ]]]
 * .full-image -- full width image containers [[[
 */

.full-image
  &
    overflow: hidden
    text-align: center
    position: relative

  img
    background: #fcfcfc

  &.cropped img,
  &.cropped img:first-child:last-child
    margin-bottom: -50px
    display: block

  &.cropped:after
    content: ''
    display: block
    position: absolute
    bottom: 0
    left: 20px
    right: 20px
    border-bottom: solid 1px $lightgray

  &.stretched img
    width: 100%

  @media (max-width: 768px)
    margin-left: -20px
    margin-right: -20px

  @media (min-width: 769px)
    width: 100vw
    margin-left: calc(-50vw + #{$page-width} / 2)

@keyframes blink
  0%
    opacity: 0
  100%
    opacity: 1
@-webkit-keyframes blink
  0%
    opacity: 0
  100%
    opacity: 1
