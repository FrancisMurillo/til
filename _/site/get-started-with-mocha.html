<!doctype html>
<!--

    follow me on twitter.

     ,-.          .                      
    /,-.\ ,-. ,-. |- ,-. ,-. ,-. . . ,_, 
    |,-|| |   `-. |  ,-| |   |   | |  /  
    \`-^/ '   `-' `' `-^ `-' '   `-^ '"' 
     `-'                                 

-->
<html class='no-js ' lang='en'>
<head>
  <meta charset='utf-8'>

  
  <title>Get started with Mocha testing &mdash; Rico Sta. Cruz</title>
  <meta content='Get started with Mocha testing' property='og:title'>
  <meta content='Get started with Mocha testing' property='twitter:title'>
  <meta content='article' property='og:type'>
  

  

  
  <link rel="canonical" href="/get-started-with-mocha.html">
  <meta name="og:url" content="/get-started-with-mocha.html">
  <link rel="prefetch" href="">
  <link rel="prerender" href="">
  

  <meta content='Rico Sta. Cruz' property='og:site_name'>
  <meta content='169204529787544' property='fb:app_id'>
  <meta content='ricostacruz' property='fb:admins'>

  <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
  <meta content='width=device-width, initial-scale=1.0' name='viewport'>
  <link href='/favicon.png' rel='shortcut icon'>

  <!-- <link rel="alternate" type="application/rss+xml" title="Rico Sta. Cruz" href="/atom.xml"> -->

  <link href='assets/style.css' rel='stylesheet'>

  <script>if(~location.hostname.indexOf("ricostacruz.com")){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-20473929-1"]);_gaq.push(["_trackPageview"]);(function(){var ga=document.createElement("script");ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s)})()}</script>

</head>
<body>
<script>document.documentElement.className += ' loading';</script>


<div class='post-list -single'>
  <div class="post-item">
    <div class="post-headline">
      <h1>
        <a href="/get-started-with-mocha.html" rel="bookmark" title="Get started with Mocha testing">
          Get started with Mocha testing
        </a>
      </h1>
      <h5 class='meta'>
        <a href="/get-started-with-mocha.html" rel="bookmark" title="Get started with Mocha testing">
          <span class='author'>Rico Sta. Cruz</span>
          &middot;
          <span class='date'>February 13, 2015</span>
        </a>
      </h5>
    </div>

    <div class="post-content">
      <p>Here’s the condensed 1-minute guide to setting up tests on a Node.js project.</p>

<h3 id="start-with-a-package">Start with a package</h3>
<p>Make a <code>package.json</code> file if you don’t have one yet, then install your weapons of choice.</p>

<pre><code class="language-sh">npm init
# just keep pressing enter.
# this will create the file `package.json`
</code></pre>

<pre><code class="language-sh">npm install --save-dev mocha chai
</code></pre>

<h3 id="write-tests">Write tests</h3>

<p>Make your first test file <code>test/my_test.js</code>:</p>

<pre><code class="language-js">/* test/my_test.js */
var expect = require('chai').expect;

describe('my test suite', function () {
  it('fails majestically', function () {
    expect(3).to.eql(2);
  });
});
</code></pre>

<p><strong>Update scripts:</strong> update your <code>package.json</code> to use mocha.</p>

<pre><code class="language-diff">  "scripts": {
-   "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
+   "test": "mocha"
  },
</code></pre>

<h3 id="run-tests">Run tests</h3>

<p>Run tests by typing <code>npm test</code>:</p>

<pre><code>  my test suite
    1) fails majestically


  0 passing (17ms)
  1 failing

  1) my test suite fails majestically:

      AssertionError: expected 3 to deeply equal 2
      + expected - actual

      +2
      -3

      test/test.js:5:18: Context.&lt;anonymous&gt;
</code></pre>

<p>Now go write tests that will pass!</p>

<h3 id="learn-a-bit-more">Learn a bit more</h3>

<p>Here’s a quick Mocha cheatsheet. Also see <a href="http://mochajs.org">mochajs.org</a>.</p>

<pre><code class="language-js">describe('test suite', function () {
  beforeEach(function() { /*...*/ });
  afterEach(function() { /*...*/ });

  before(function() { /*...*/ });
  after(function() { /*...*/ });

  it('a basic test', function() {
    /*...*/ });

  it('a test with a promise', function() {
    return somePromiseObject; });

  it('an asynchronous test', function(next) {
    if (success) { next(); } else { next(error); }
  });

  xit('use "xit" for pending tests', function() {
    /*...*/ });
});
</code></pre>

<p><strong>Chai:</strong> Here’s a quick Chai cheatsheet. See <a href="http://chaijs.com/api/bdd/">chaijs.com</a> for other <code>expect()</code>ations.</p>

<pre><code class="language-js">expect(3).to.eql(2);

expect(obj).to.be.a('string');
expect(obj).to.be.null;
expect(obj).to.be.true;
expect(obj).to.be.false;
expect(obj).to.be.undefined;

expect(list).to.include("item");
expect(list).to.have.length(3);
expect(list).to.have.length.gt(0);
</code></pre>

<h3 id="further-reading">Further reading</h3>

<p>Use Sinon (<a href="http://sinonjs.org/">sinonjs.org</a>) for mocks.</p>


    </div>

    <!--
      <ul class="social-list">
        <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=/get-started-with-mocha.html" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
        <li class="twitter"><a href="https://twitter.com/intent/tweet?text=/get-started-with-mocha.html" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
        <li class="googleplus"><a href="https://plus.google.com/share?url=/get-started-with-mocha.html" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
      </ul>
    -->
  </div>
</div>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>

